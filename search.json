[{"title":"Containerã€Docker Engine èˆ‡ Docker Desktopï¼šä¸€æ¬¡é‡æ¸…è§’è‰²èˆ‡åŸ·è¡Œæµç¨‹","url":"/Docker/Container%E3%80%81Docker-Engine-%E8%88%87-Docker-Desktop%EF%BC%9A%E4%B8%80%E6%AC%A1%E9%87%90%E6%B8%85%E8%A7%92%E8%89%B2%E8%88%87%E5%9F%B7%E8%A1%8C%E6%B5%81%E7%A8%8B/","content":"å‰è¨€æ˜¯å¦æ¯æ¬¡åŸ·è¡Œäº†Dockerå‘½ä»¤ æˆ–æ˜¯é€éå®¹å™¨åŒ–è§£æ±ºäº†æ—¥å¸¸é–‹ç™¼éœ€æ±‚çš„é›£é¡Œå¾Œç¸½ä¸ç¦å»æƒ³é€™ä¸€åˆ‡æ˜¯å¦‚ä½•è¾¦åˆ°çš„?é‚„æ˜¯ä¾ç„¶ä¸äº†è§£ç‚ºç”šéº¼è¦å®‰è£Docker Desktop?æˆ–æ˜¯ä¸æ¸…æ¥šContainerä»¥åŠDocker Engineç©¶ç«Ÿæ˜¯ä»€éº¼?ä»Šå¤©é€éé€™ç¯‡æ–‡ç« ä¸€æ¬¡é‡æ¸…! å…§å®¹ä¿è­‰ä¸æœƒéæ–¼å­¸è¡“è‰±æ¾€å› ç‚ºæˆ‘ä¹Ÿæ²’é‚£éº¼å²å®³æº–å‚™å¥½å˜”åè¢‹ æˆ‘å€‘é¦¬ä¸Šé–‹å§‹!\n\n\nå¸¸è¦‹åè©åœ¨å­¸ç¿’ Docker çš„éç¨‹ä¸­ï¼Œå¸¸å¸¸æœƒå‡ºç¾å¹¾å€‹çœ‹ä¼¼ç›¸é—œã€å¯¦éš›ä¸Šå±¤æ¬¡ä¸åŒçš„åè©ï¼š\n\nContainer\nDocker Engine\nDocker Desktop\nVM\nKernel\n\né€™ç¯‡æ–‡ç« çš„ç›®æ¨™æ˜¯ é‡æ¸…å®ƒå€‘å„è‡ªçš„è§’è‰²ï¼Œä»¥åŠåœ¨ é Linux ä½œæ¥­ç³»çµ±ä¸Šï¼Œcontainer æ˜¯å¦‚ä½•è¢«åŸ·è¡Œçš„  \nContainer èˆ‡ VM çš„æœ¬è³ªå·®ç•°åœ¨æ¦‚å¿µä¸Šï¼Œå¯ä»¥ç”¨ä¸€å¥è©±å€åˆ†ï¼š\n\nVM æ˜¯ç¡¬é«”å±¤ç´šçš„æŠ½è±¡ï¼ŒContainer æ˜¯ OS Kernel å±¤ç´šçš„æŠ½è±¡\n\nVMï¼ˆVirtual Machineï¼‰\næ¨¡æ“¬ CPUã€è¨˜æ†¶é«”ã€ç£ç¢Ÿã€ç¶²å¡ç­‰ç¡¬é«”\nå…§éƒ¨æœ‰ å®Œæ•´çš„ Guest OS èˆ‡è‡ªå·±çš„ kernel\néš”é›¢æ€§å¼·ï¼Œä½†æˆæœ¬é«˜ã€æ•ˆèƒ½è¼ƒä½\n\nHost OS&nbsp; â””â”€â”€ Hypervisor&nbsp; &nbsp; â””â”€â”€  Virtual Hardware&nbsp; &nbsp; &nbsp; â””â”€â”€ Guest OS (Kernel)&nbsp; &nbsp; &nbsp; &nbsp; â””â”€â”€ Application\n\nContainer\næ²’æœ‰è‡ªå·±çš„ kernel\næœ¬è³ªä¸Šæ˜¯ è¢« namespace &#x2F; cgroup éš”é›¢çš„ process\nèˆ‡ Host å…±ç”¨åŒä¸€å€‹ kernel\nå•Ÿå‹•å¿«ã€æ•ˆèƒ½æ¥è¿‘åŸç”Ÿ\n\nHost OS (Linux Kernel)&nbsp; â””â”€â”€ Container Runtime&nbsp; &nbsp; â””â”€â”€ Application (Process)  \nContainer ç‚ºä»€éº¼ä¸€å®šéœ€è¦ Linux Kernelï¼Ÿ\nLinux-based container åªèƒ½åŸ·è¡Œåœ¨ Linux kernel ä¸Š\n\nContaineræœ¬èº« ä¸åŒ…å« kernelï¼Œè€Œæ˜¯ä¾é™„æ–¼å…¶æ‰€å±¬ä½œæ¥­ç³»çµ±çš„ kernel ä¾†è™•ç†ç³»çµ±å‘¼å«(syscall)åœ¨ Docker çš„å¸¸è¦‹ä½¿ç”¨æƒ…å¢ƒä¸­ï¼Œé€™é€šå¸¸æŒ‡çš„æ˜¯ Linux kernel(99%çš„Imageéƒ½æ˜¯ç”±linux-based)\né€™ä¹Ÿæ˜¯ç‚ºä»€éº¼ï¼š\n\nLinux ä¸»æ©Ÿå¯ä»¥ç›´æ¥è·‘ Docker\nWindows &#x2F; macOS ç„¡æ³•ã€Œç›´æ¥ã€åŸ·è¡Œ Linux container\n\nDocker Engine æ˜¯ä»€éº¼è§’è‰²ï¼ŸDocker Engineï¼ˆdockerdï¼‰æ˜¯ container çš„æ§åˆ¶å¹³é¢ï¼ˆcontrol planeï¼‰ï¼Œè² è²¬ï¼š\n\nå»ºç«‹èˆ‡ç®¡ç† container\nè¨­å®š namespace &#x2F; cgroup\næ›è¼‰ image filesystemï¼ˆoverlayfsï¼‰\nå»ºç«‹ networkã€port mapping\nå•Ÿå‹• &#x2F; åœæ­¢ container\n\nDocker Engine ä¸åœ¨ container çš„ syscall åŸ·è¡Œè·¯å¾‘ä¸Šã€‚\nä¸€æ—¦ container å•Ÿå‹•å®Œæˆï¼š\ncontainer process â†’ Linux kernel\nsyscall ç›´æ¥ç”± kernel è™•ç†ï¼Œä¸æœƒç¶“é Docker Engineã€‚  \n\n\n\né‚£ Docker Desktop åˆæ˜¯åšä»€éº¼çš„ï¼Ÿåœ¨ Windows &#x2F; macOS ä¸Šï¼Œå•é¡Œä¸æ˜¯ Dockerï¼Œè€Œæ˜¯ï¼š\n\nç³»çµ±æœ¬èº«æ²’æœ‰ Linux kernel\n\nDocker Desktop çš„æ ¸å¿ƒä»»å‹™åªæœ‰ä¸€å€‹ï¼š\n\nå…ˆå•Ÿå‹•ä¸€å€‹ Linux VMï¼Œç„¶å¾Œåœ¨è£¡é¢åŸ·è¡Œ Docker Engine\n\nå¯¦éš›æ¶æ§‹å¦‚ä¸‹ï¼š\nWindows &#x2F; macOS&nbsp; â””â”€â”€ Docker Desktop&nbsp; &nbsp; â””â”€â”€ Linux VM (çœŸå¯¦çš„ Linux kernel)&nbsp; &nbsp; &nbsp; â””â”€â”€ Docker Engine&nbsp; &nbsp; &nbsp; &nbsp; â””â”€â”€ Containers\nDocker Desktop â‰  Docker EngineDocker Desktop æ˜¯ã€ŒåŒ…è£ VM + Docker Engine çš„å·¥å…·ã€\nContainer å…§çš„æŒ‡ä»¤å¤§è‡´æ˜¯æ€éº¼åŸ·è¡Œçš„ï¼Ÿä»¥ Non-Linux OS + Docker Desktop ç‚ºä¾‹ï¼Œcontainer åŸ·è¡Œæµç¨‹å¦‚ä¸‹ï¼š\nä¸€èˆ¬æŒ‡ä»¤container process  â†“ï¼ˆuser-space instructionï¼‰CPU ç›´æ¥åŸ·è¡Œ\nsyscallcontainer process  â†“ syscallLinux kernelï¼ˆVM å…§ï¼‰  â†“è™›æ“¬ç¡¬é«”  â†“Hypervisor  â†“Host kernel  â†“å¯¦é«”ç¡¬é«”\nç°¡å–®ç¸½çµè§’è‰²åˆ†å·¥\nContainerï¼šè¢«éš”é›¢çš„ processï¼Œæœ¬èº«æ²’æœ‰ kernel\nDocker Engineï¼šcontainer çš„ç”Ÿå‘½é€±æœŸèˆ‡è³‡æºç®¡ç†è€…\nDocker Desktopï¼šç‚ºé Linux ç³»çµ±æä¾› Linux VM çš„åŒ…è£å·¥å…·\nLinux VMï¼šæä¾› Linux kernel èˆ‡ç¡¬é«”è™›æ“¬åŒ–\nHost OSï¼šæœ€çµ‚çš„ç¡¬é«”è³‡æºç®¡ç†è€…\n\nçµèªç†è§£ Docker çš„é—œéµï¼Œä¸åªåœ¨æ–¼æŒ‡ä»¤æœ¬èº«ï¼Œè€Œåœ¨æ–¼ï¼š\n\nå“ªäº›äº‹æƒ…æ˜¯ kernel åšçš„ï¼Œå“ªäº›åªæ˜¯ Docker å¹«ä½ ã€Œå®‰æ’å¥½ã€\n\nä¸€æ—¦é€™å€‹é‚Šç•Œæ¸…æ¥šï¼Œå¾ŒçºŒå­¸ç¿’ Dockerfileã€Kubernetes éƒ½æœƒè®Šå¾—æ¸…æ™°ä¸”è‡ªç„¶\n\n  è¬è¬é–±è®€åˆ°é€™è£¡çš„ä½ &#x2F;å¦³å¦‚æœè¦ºå¾—æ–‡ç« å°æ‚¨æœ‰å¹«åŠ©ä¸å¦¨æŒ‰å€‹å–œæ­¡è‹¥æœ‰ä»»ä½•ç–‘å•ä¹Ÿæ­¡è¿åº•ä¸‹ç•™è¨€\n\n\n","categories":["Docker"],"tags":["Docker","Container","VM"]},{"title":"Docker-åŸºæœ¬åŠŸ(ä¸€)","url":"/Docker/Docker-%E5%9F%BA%E6%9C%AC%E5%8A%9F-%E4%B8%80/","content":"å‰è¨€æœ‰æ¥è§¸éå®¹å™¨åŒ–(Containerization)çš„æœ‹å‹å€‘ä¸€å®šå°ä¸€éš»è—è‰²å°é¯¨é­šğŸ³ä¸é™Œç”Ÿå§æ²’éŒ¯! ç›®å‰ä¸»æµçš„å®¹å™¨åŒ–æŠ€è¡“å°±æ˜¯æˆ‘å€‘ç†Ÿæ‚‰(ä¹Ÿå¯èƒ½é‚„ä¸ç†Ÿæ‚‰ğŸ¤«)çš„Dockerï¼Œç•¶ç„¶é‚„æœ‰Podmanã€LXCç­‰ç­‰è€Œé€™ç¯‡æ–‡ç« å°‡æœƒä½œç‚ºDockerç³»åˆ—çš„ç¬¬ä¸€ç¯‡ï¼Œæ‰€ä»¥ç›¸ç•¶æ–°æ‰‹å‹å–„ï¼Œå¦‚æœè¬›åˆ°é€™é‚Šé‚„æ²’é€ æˆç”Ÿç†ä¸é©çš„è©±å°±æ”¾å¿ƒåœ°çœ‹ä¸‹å»å§\n\n\nä»€éº¼æ˜¯Docker?è¦å®Œå…¨è§£é‡‹ç”šéº¼æ˜¯Dockerå‰æ‡‰è©²å…ˆèªè­˜ä½•è¬‚å®¹å™¨(Container) ä»¥åŠèˆ‡ä¹‹ç›¸è¿‘çš„è™›æ“¬æ©Ÿ(Virtual Machine) åˆ†åˆ¥æ˜¯ç”šéº¼ï¼Œé€™è£¡å…ˆå®¹æˆ‘æŒ–å€‹å‘ä¹‹å¾Œå†ä¾†è£œé½Šé€™å€‹æ¦‚å¿µã€‚ä¸éç°¡å–®ä¾†èªªå‘¢å®¹å™¨çš„å­˜åœ¨å°±æ˜¯ç‚ºäº†è¦è§£æ±ºä¸€å€‹é‡è¦çš„å·¥ç¨‹å•é¡ŒIt works on my machineï¼Œæƒ³å¿…å¤§å®¶æˆ–å¤šæˆ–å°‘éƒ½æœ‰é‡éé€™æ¨£çš„æƒ…æ³: æœ¬åœ°æ¸¬è©¦çš„æ™‚å€™ä¸€åˆ‡éƒ½é‹è¡Œçš„å¥½å¥½çš„ï¼Œä½†ç‚ºä»€éº¼ä¸Šç·šåˆ°é‹è¡Œç’°å¢ƒã€å¦ä¸€å°é›»è…¦ä¸Šç”šè‡³æ˜¯çµ¦ä¸»ç®¡demoçš„æ™‚å€™å°±å‡ºç‹€æ³äº†å‘¢?è€Œæˆ‘å€‘åˆä¸å¯èƒ½æŠŠæ•´å°é›»è…¦ç½®æ›éå»(ä¹Ÿä¸çŸ¥é“æ€éº¼ç§»æ®–ç’°å¢ƒ)ï¼Œæ‰€ä»¥é€™æ™‚å€™å°±æœƒéœ€è¦ç”¨åˆ°é€™äº›å®¹å™¨åŒ–çš„æŠ€è¡“ï¼ŒæŠŠæ‰€æœ‰é‹è¡Œæœƒéœ€è¦çš„ä¾è³´ä»¥åŠç‰ˆæœ¬è¨­å®šç­‰ç­‰å…¨éƒ¨åŒ…è£æˆä¸€å€‹å”¯è®€çš„æ¨¡æ¿æª”æ¡ˆï¼Œé€™æ¨£å°±å¯ä»¥åœ¨ä»»ä½•æ©Ÿå™¨ä¸Šä¾ç…§æ¨¡æ¿å»ºæ§‹åŸ·è¡Œç’°å¢ƒä¸¦åŸ·è¡Œå…¶æ‡‰ç”¨æœå‹™ï¼Œè€Œé€™å…¶ä¸­å…¶å¯¦ç‰½æ¶‰åˆ°äº†ä¸‰å€‹å¾ˆé‡è¦çš„æ¦‚å¿µ\n\næ˜ åƒæª”(Image)\nå®¹å™¨(Container)\nå€‰åº«(Repository)\n\næ˜ åƒæª”å¯ä»¥æŠŠå®ƒæƒ³æˆæ˜¯å‰µå»ºå®¹å™¨æ‰€éœ€è¦çš„è—åœ– ä¹Ÿå°±æ˜¯å…ˆå‰æåˆ°çš„æ¨¡æ¿ï¼Œæˆ‘å€‘è¦å…ˆæœ‰è—åœ–æ‰çŸ¥é“å¦‚ä½•â€å»ºç«‹â€å‡ºå®¹å™¨ä¸¦â€é‹è¡Œâ€å®ƒï¼Œä»–å€‘å°±åƒè¨­è¨ˆåœ–è·Ÿæˆ¿å­çš„é—œä¿‚ï¼Œæ‰€ä»¥åŒä¸€ä»½æ˜ åƒæª”å¯ä»¥å‰µé€ å‡ºå¤šå€‹å®¹å™¨ï¼Œè€Œä¸€å°é›»è…¦åŸºæœ¬ä¸Šå¯ä»¥åŒæ™‚é‹è¡Œæˆç™¾ä¸Šåƒå€‹å®¹å™¨éƒ½ä¸æ˜¯å•é¡Œ! è€Œå»ºç«‹å‡ºä¾†çš„å®¹å™¨å°±åƒä¸€å€‹æ‡‰ç”¨ç¨‹å¼ä¸€æ¨£ï¼Œä½ å¯ä»¥é¸æ“‡é‹è¡Œæˆ–æ˜¯åœæ­¢å®ƒã€‚å€‰åº«çš„æ¦‚å¿µä¸ç”¨æˆ‘å¤šèªªï¼Œå°±æ˜¯å­˜æ”¾é€™äº›æ˜ åƒæª”çš„åœ°æ–¹ï¼Œå®ƒä¹Ÿåˆ†æˆå…¬é–‹å€‰åº«(public)èˆ‡ç§æœ‰å€‰åº«(private)å…©ç¨®é¡å‹ã€‚ç•¶ç„¶ç”¨èªªçš„ç›¸ç•¶ç°¡å–®ï¼Œå¯å¯¦éš›è©²å¦‚ä½•æ“ä½œå‘¢? è®“æˆ‘å€‘ä¸€æ­¥ä¸€æ­¥äº†è§£\nä¸‹è¼‰èˆ‡å®‰è£å„ä½è«‹å®¹æˆ‘å·å€‹æ‡¶ğŸ«  å®˜æ–¹ç¶²ç«™å·²ç¶“æŠŠå®‰è£æ­¥é©Ÿè¬›å¾—éå¸¸è©³ç´°äº† ç…§è‘—æ“ä½œåŸºæœ¬ä¸Šä¸æœƒå‡ºå•é¡Œï¼Œä½†å€¼å¾—ä¸€æçš„æ˜¯å¦‚æœæ˜¯Windows&#x2F;Macç”¨æˆ¶å‰‡éœ€è¦å¤šå®‰è£ä¸€å€‹Docker Desktopå¦å‰‡ç„¡æ³•é †åˆ©é‹è¡Œ\né–‹å•ŸDockerä¸‹è¼‰å®‰è£å®ŒDockerå¾Œæˆ‘å€‘å¯ä»¥åˆ°çµ‚ç«¯æ©Ÿä¸Šè¼¸å…¥\ndocker --version\nå¦‚æœæˆåŠŸå°å‡ºç‰ˆæœ¬è¨Šæ¯å°±è¡¨ç¤ºå®‰è£æˆåŠŸå’¯\nDocker version 25.0.3, build 4debf41\nä¹‹å¾Œé–‹å•ŸDocker Desktopä¸¦é‹è¡Œå®ƒ\nåŸºæœ¬èªæ³•ä¸€é–‹å§‹ä¸‹è¼‰å®ŒDockeræœƒçœ‹åˆ°æœ¬åœ°å€‰åº«æ‡‰è©²æ˜¯ç©ºç©ºå¦‚ä¹Ÿçš„ï¼Œé€™æ™‚å€™ä½ æœƒå¥½å¥‡é›£é“æˆ‘è¦ç´”æ‰‹å·¥è‡ªå·±åšæ˜ åƒæª”(Image)æ‰èƒ½é–‹å•Ÿå—? éä¹Ÿï¼Œå…¶å¯¦å·²ç¶“æœ‰è¨±å¤šç¾æˆçš„æ˜ åƒæª”èƒ½å¤ ç›´æ¥æŠ“ä¸‹ä¾†ä½¿ç”¨å–”(ä¹Ÿå°±æ˜¯å¾ç¶²è·¯ä¸Šçš„å…¬é–‹å€‰åº«æŠ“å–)ï¼Œæœ€ç›´æ¥çš„ç¯„ä¾‹å°±æ˜¯Docker hubä»Šå¤©çš„ç¯„ä¾‹å°±è®“æˆ‘å€‘ä½¿ç”¨ç¾æˆçš„Imageä¾†å•Ÿå‹•redisæœå‹™å§ï¼Œè‡³æ–¼redisæ˜¯ç”šéº¼æˆ‘æ—¥å¾Œæœ‰æ©Ÿæœƒå†ä¾†ä»‹ç´¹ä¸€ä¸‹ï¼Œä½†ç°¡å–®ä¾†èªªå®ƒå°±æ˜¯ç¨®key-value storeï¼Œå±¬æ–¼NoSQLçš„ä¸€ç¨®é¡å‹\né¦–å…ˆå…ˆæŠ“å–redis Imageï¼Œè¼¸å…¥docker pull [REPOSITORY:TAG]\ndocker pull redis:latest\nå…¶ä¸­REPOSITORYå°±æ˜¯å»Docker hubæŸ¥è©¢rediså¾Œé¡¯ç¤ºçš„åç¨±è€Œtagå‰‡æ˜¯å¯ä»¥æŒ‡å®šï¼Œåœ¨åº•ä¸‹åˆ—å‡ºçš„â€Supported tags and respective Dockerfile linksâ€éƒ½å¯ä»¥é¸ç”¨ï¼Œè‹¥æƒ³ç”¨æœ€æ–°çš„ç‰ˆæœ¬å‰‡è¼¸å…¥ latest\nä¸‹è¼‰å®Œæˆå¾Œå¯ä»¥è¼¸å…¥docker imagesæŸ¥çœ‹æœ¬æ©Ÿç¾æœ‰çš„æ‰€æœ‰æ˜ åƒæª”\ndocker images\næ‡‰è©²æœƒçœ‹åˆ°å‰›å‰›ä¸‹è¼‰å¥½çš„redis(å› ç‚ºæˆ‘é‚„æœ‰å…¶ä»–Imageæ‰€ä»¥æœƒä¸€ä½µé¡¯ç¤ºå‡ºä¾†)   \nä¹‹å¾Œæˆ‘å€‘å»ºæ§‹é€™å€‹ImageæˆContainerä¸¦ä¸”é‹è¡Œå®ƒdocker run [REPOSITORY:TAG]\ndocker run redis:latest\né€™æ™‚å€™æ‡‰è©²æœƒçœ‹åˆ°æˆ‘å€‘çš„çµ‚ç«¯æ©Ÿè¢«ä»–å ç”¨ä½äº†!è€Œé€™é¡¯ç„¶åœ¨é–‹ç™¼ä¸Šé¢ç›¸ç•¶ä¸æ–¹ä¾¿ï¼Œæˆ‘å€‘å…ˆctrl+Cæˆ–Command (âŒ˜) + CæŠŠå®ƒåœæ‰ï¼Œç„¶å¾Œä½¿ç”¨flagå»è¨­å®šè®“ä»–è®ŠæˆèƒŒæ™¯æ¨¡å¼ï¼ˆdetachedï¼‰\ndocker run -d redis:latest\né€™æ™‚å€™æœƒæ‰“å°å‡ºå‰›å‰›åŸ·è¡Œçš„container IDï¼Œå°±è¡¨ç¤ºæ­£åœ¨èƒŒæ™¯åŸ·è¡Œäº†\né€™æ™‚å€™æˆ‘å€‘å†é€éçµ‚ç«¯æ©ŸæŸ¥çœ‹æ­£åœ¨é‹è¡Œçš„æ‰€æœ‰Container\ndocker ps\næœƒçœ‹åˆ°æˆ‘å€‘çš„Containerçš„IDã€Imageåç¨±ã€portã€ä»¥åŠä¸€å€‹å¥‡æ€ªçš„Containeråç¨±ï¼Œä½†æˆ‘å€‘èƒ½ä¸èƒ½çµ¦æ¯å€‹é‹è¡Œçš„Containerè‡ªè¨‚åç¨±å‘¢ï¼Œç­”æ¡ˆæ˜¯è‚¯å®šçš„ï¼Œä¹Ÿæ˜¯ä¸€æ¨£é€éflagå»è¨­ç½® --name [containerName]æˆ‘å€‘å…ˆè¼¸å…¥ docker stop [containerID] æˆ–æ˜¯ docker stop [containerName] ä¾†åœæ­¢æœå‹™\ndocker stop 33b5c1407bce\næ¥è‘—é‡å•Ÿæœå‹™\ndocker run -d --name my-redis-server redis:latest\né€™æ™‚å†è¼¸å…¥docker pså°±çœ‹åˆ°my-redis-serveræˆåŠŸé¡¯ç¤ºå•¦  \næ¥è‘—è°æ˜çš„ä½ å°±æœƒæƒ³èªªè¦é€£ç·šè‡³å‰µå»ºå¥½çš„redis server(é è¨­æ–¼6379 port)ï¼Œæ–¼æ˜¯è¼¸å…¥ä»¥ä¸‹çš„æŒ‡ä»¤å˜—è©¦é€£ç·š:  \n(å¦‚æœæœ‰è£redis-cli)\nredis-cli -h 127.0.0.1 -p 6379\nLinux users\nnc localhost 6379\næˆ–æ˜¯ç›´æ¥è¼¸å…¥\ndocker run --rm redis redis-cli -h host.docker.internal -p 6379\nä½†ç™¼ç¾æ˜æ˜æœå‹™å·²ç¶“å•Ÿå‹•äº†å»å¦‚ä½•ä¹Ÿé€£ä¸ä¸Š\nCould not connect to Redis at host.docker.internal:6379: Connection refused\né‚£æ˜¯å› ç‚ºæˆ‘å€‘ä¸¦æ²’æœ‰ä½¿Containerçš„6379 portå°å¤–æ›éœ²ï¼Œè€Œé€™ä»¶äº‹ä¹Ÿå¯ä»¥å¾æˆ‘å€‘ä¹‹å‰é€édocker psæ‰“å°çš„è³‡è¨Šå¾—çŸ¥ä¸€èˆ¬ä¾†èªªï¼Œredisæœå‹™é è¨­æ˜¯ä½¿ç”¨TCPç›£è½6379 portï¼Œå°±åƒæ˜¯httpæœå‹™è·‘åœ¨80 portï¼Œä½†æ˜¯åœ–ä¸­é¡¯ç¤º6379/tcpä»£è¡¨é›–ç„¶Containeræœ¬èº«åœ¨ç›£è½é€™å€‹ç«¯å£ï¼Œä½†æˆ‘å€‘ä¸¦æ²’æœ‰æŒ‡æ´¾ä¸€å€‹host portè®“Dockerå¹«æˆ‘å€‘è½‰æ¥å‡ºä¾†ã€‚ç‚ºæ­¤æˆ‘å€‘æŒ‡æ´¾hostçš„6379 portå»çµ¦Container(å»ºè­°ä½¿ç”¨åŒæ¨£çš„host portå»å°æ‡‰container port) æˆ‘å€‘ä½¿ç”¨ -p hostPort:containerPort å»æŒ‡æ´¾ï¼Œé€™å€‹è¡Œç‚ºå« port mapping\nPort Mapping in Dockersource: https://medium.com/@ppran234/why-do-we-bind-ports-in-docker-4f2a62ea2e69 \nåœ¨è‘—æ‰‹è¨­å®šç«¯å£æ˜ å°„ä¹‹å‰ï¼Œæˆ‘å€‘å…ˆåœæ­¢ç•¶å‰çš„å®¹å™¨ï¼Œå†è¼¸å…¥docker ps -aæŠŠæ‰€æœ‰çš„Containeræ‰“å°å‡ºä¾†(å…ˆå‰çš„docker psåªèƒ½å°å‡ºæ­£åœ¨åŸ·è¡Œçš„)ä¹‹å¾Œå…ˆæŠŠæ‰€æœ‰åœæ­¢çš„å®¹å™¨åˆªé™¤(ç›®å‰æœƒæœ‰3å€‹)è‡³æ–¼ç‚ºç”šéº¼é€™éº¼å¤šå‘¢? å› ç‚ºæ¯æ¬¡æˆ‘å€‘åŸ·è¡Œdocker runéƒ½æœƒåŸºæ–¼Imageå»ºç«‹ä¸¦å•Ÿå‹•ä¸€å€‹æ–°çš„containerï¼Œè€Œè‹¥è¦æŒ‡å®šå•Ÿå‹•æŸå€‹å·²ç¶“å»ºç«‹å¥½çš„containerå‰‡æ˜¯ä½¿ç”¨docker startçš„æŒ‡ä»¤ã€‚  \næˆ‘å€‘è¼¸å…¥ä»¥ä¸‹æŒ‡ä»¤æŠŠå®¹å™¨åˆªé™¤\ndocker rm id_1 id_2 id_3\nç„¶å¾Œå†æ¬¡è¼¸å…¥docker ps -aæª¢æŸ¥æ‰€æœ‰å®¹å™¨éƒ½è¢«æ¸…ç©ºäº†  \næˆ‘å€‘å°±æ¥è‘—åŸ·è¡Œ:\ndocker run -d --name my-redis-server -p 6379:6379 redis:latest\né€™æ™‚å€™è¼¸å…¥docker psä¸¦æŸ¥çœ‹portæ‡‰è©²æœƒé¡¯ç¤º0.0.0.0:6379-&gt;6379&#x2F;tcpé€™æ¨£å°±è¡¨ç¤ºç«¯å£æœ‰æ­£ç¢ºå°å¤–æ˜ å°„æ¥ä¸‹ä¾†æˆ‘å€‘æ¨¡æ“¬ä½¿ç”¨è©²redisæœå‹™ï¼Œå¯«å…¥ä¸€ç­†è³‡æ–™ä¸¦è®€å–å‡ºã€‚æˆ‘å€‘å…ˆè¼¸å…¥ä»¥ä¸‹æŒ‡ä»¤é€²å…¥åˆ°redisçš„çµ‚ç«¯å»docker exec -it [containerName] redis-cli\ndocker exec -it my-redis-server redis-cli\næ¥è‘—è¼¸å…¥ä»¥ä¸‹rediså‘½ä»¤\nSET myKey &quot;Hello Redis&quot;\nç„¶å¾Œæ–°é–‹ä¸€å€‹çµ‚ç«¯æ©Ÿè¦–çª—ï¼Œè¼¸å…¥ä»¥ä¸‹å‘½ä»¤é€£ç·šåˆ°6379ç«¯å£\ndocker run -it --rm redis redis-cli -h host.docker.internal -p 6379\né€£ç·šæˆåŠŸå¾Œæ¸¬è©¦ä¸€ä¸‹æ˜¯å¦èƒ½æ­£ç¢ºæŠŠå‰›å‰›å¯«å…¥çš„è³‡æ–™è®€å–å‡º\nGET myKey\nè‹¥å‡ºç¾ â€œHello Redisâ€ ä»£è¡¨æˆåŠŸå’¯! é€çµ¦è‡ªå·±200å€‹æŒè²ğŸ‘ç„¶å¾Œæˆ‘å€‘å¯ä»¥é€€å‡ºredisé€£ç·šä¸¦ä¸”æŠŠcontaineré—œé–‰\ndocker stop my-redis-server\nç„¶å¾Œå¯ä»¥æ”¾å¿ƒä½¿ç”¨docker rmæŠŠåœæ­¢çš„containeråˆªé™¤å’¯\ndocker rm my-redis-server\næœ€ä¸€é–‹å§‹ä¸‹è¼‰çš„redis Imageä¹Ÿå¯ä»¥é€édocker rmi [ImageID]æˆ–æ˜¯docker rmi [REPOSITORY:TAG]åˆªé™¤\ndocker rmi redis:latest\n\nç¸½çµä»¥ä¸Šçš„èªæ³•éƒ½ç›¸ç•¶ç°¡å–®ä½†å»éå¸¸å¯¦ç”¨ï¼Œæ‡‰å°åŸºæœ¬çš„æ—¥å¸¸é–‹ç™¼æ˜¯æ²’ç”šéº¼å•é¡Œçš„! é€™é‚Šæˆ‘ä¹Ÿå¹«å¤§å®¶æ•´ç†çš„ä¸€å€‹è¡¨æ ¼ï¼Œå¯ä»¥å¿«é€ŸæŸ¥é–±åŸºæœ¬èªæ³•\nDocker åŸºæœ¬èªæ³•é€ŸæŸ¥è¡¨\n\n\né¡åˆ¥\næŒ‡ä»¤ &#x2F; ç¯„ä¾‹\nèªªæ˜\n\n\n\nImage\ndocker pull\nä¸‹è¼‰ Image\n\n\n\ndocker images\nåˆ—å‡ºæ‰€æœ‰ image\n\n\n\ndocker rmi &lt;image&gt;\nåˆªé™¤æŒ‡å®š image\n\n\n\ndocker rmi -f &lt;image&gt;\nå¼·åˆ¶åˆªé™¤ imageï¼ˆå³ä½¿æœ‰ container ä¾è³´ï¼‰\n\n\n\ndocker image prune\nåˆªé™¤ dangling image\n\n\n\ndocker image prune -a\nåˆªé™¤æ‰€æœ‰æœªä½¿ç”¨çš„ image\n\n\nContainer\ndocker run -d --name my-container &lt;image&gt;\nå»ºç«‹ä¸¦åœ¨èƒŒæ™¯æ¨¡å¼ä¸‹å•Ÿå‹•æ–°çš„ container\n\n\n\ndocker ps\næŸ¥çœ‹æ­£åœ¨é‹è¡Œçš„ container\n\n\n\ndocker ps -a\næŸ¥çœ‹æ‰€æœ‰ containerï¼ˆåŒ…æ‹¬åœæ­¢çš„ï¼‰\n\n\n\ndocker logs &lt;container&gt;\næŸ¥çœ‹è©² container æ‰€æœ‰æ—¥èªŒï¼ˆå¸¸é…åˆ detached modeï¼‰\n\n\n\ndocker stop &lt;container&gt;\nåœæ­¢æ­£åœ¨é‹è¡Œçš„ container\n\n\n\ndocker start &lt;container&gt;\nå•Ÿå‹•å·²åœæ­¢çš„ container\n\n\n\ndocker restart &lt;container&gt;\né‡å•Ÿ container\n\n\n\ndocker exec -it &lt;container&gt; &lt;command&gt;\nåœ¨ container å…§åŸ·è¡Œå‘½ä»¤ï¼ˆä¾‹å¦‚ redis-cli ä»¥ç›´æ¥æ“ä½œ Redisï¼‰\n\n\n\ndocker rm &lt;container&gt;\nåˆªé™¤ containerï¼ˆéœ€å…ˆåœæ­¢ï¼‰\n\n\n\ndocker container prune\nåˆªé™¤æ‰€æœ‰åœæ­¢çš„ container\n\n\nPort æ˜ å°„\n-p &lt;host_port&gt;:&lt;container_port&gt;\nå°‡ container å…§çš„ port æ˜ å°„åˆ° Host\n\n\nå¿«é€Ÿæ¸…ç†\ndocker system prune\nåˆªé™¤æœªä½¿ç”¨çš„ containerã€imageã€volume ç­‰\n\n\nä¸‹ä¸€é›†å†è·Ÿå¤§å®¶åˆ†äº«æ›´å¤šå¯¦ç”¨çš„èªæ³•ï¼Œé †ä¾¿æŠŠé€™é‚Šå‡ºç¾çš„é€²éšèªæ³•ä¸€ä½µè£œå……\n\n  è¬è¬é–±è®€åˆ°é€™è£¡çš„ä½ &#x2F;å¦³å¦‚æœè¦ºå¾—æ–‡ç« å°æ‚¨æœ‰å¹«åŠ©ä¸å¦¨æŒ‰å€‹å–œæ­¡è‹¥æœ‰ä»»ä½•ç–‘å•ä¹Ÿæ­¡è¿åº•ä¸‹ç•™è¨€\n\n\n","categories":["Docker"],"tags":["Docker","Container","Backend"]},{"title":"Docker-åŸºæœ¬åŠŸ(äºŒ)","url":"/Docker/Docker-%E5%9F%BA%E6%9C%AC%E5%8A%9F-%E4%BA%8C/","content":"å‰è¨€åœ¨ä¸Šä¸€ç¯‡æåˆ°éåŸºæœ¬çš„Dockerèªæ³•å¾Œæƒ³å¿…å°æ›´é€²éšçš„ç”¨æ³•æ„Ÿåˆ°å¥½å¥‡å§! åœ¨é€™ä¸€ç¯‡å°‡æœƒåˆ†äº«æ›´å¤šé—œæ–¼flagçš„ä½¿ç”¨ï¼Œè€Œåœ¨æ—¥å¸¸é–‹ç™¼ä¸­ä¹Ÿæœ‰è¨±å¤šå¥½ç”¨ã€å¿…å­¸çš„flagç”¨æ³•å–”! å»¢è©±ä¸å¤šèªªè®“æˆ‘å€‘é¦¬ä¸Šé–‹å§‹\n\n\nå›é¡§é‚„è¨˜å¾—æˆ‘å€‘åœ¨ç¬¬ä¸€ç¯‡å…¶å¯¦å°±è¬›éflagçš„å­˜åœ¨å—? é€™åš´æ ¼ä¾†èªªå®Œå…¨ä¸æ˜¯Dockerå°ˆå±¬ï¼Œå°æ–¼æœ‰å¯«éä»»ä½•bash commandçš„äººä¾†èªªæ‡‰è©²æ˜¯ç›¸ç•¶ç†Ÿæ‚‰äº†ã€‚åœ¨é€²å…¥æ–°çš„ç”¨æ³•ä¹‹å‰ï¼Œå…ˆä¸€èµ·ä¾†å›é¡§ä¸€ä¸‹ä¸Šä¸€ç¯‡æåˆ°éçš„!\ndocker run -d --name my-redis-server -p 6379:6379 redis:latest\n-d æ˜¯è®“containeré€²å…¥èƒŒæ™¯æ¨¡å¼(detached)--name æ˜¯çµ¦containerä¸€å€‹åç¨±-p å‰‡æ˜¯port mappingï¼Œè®“ä¸»æ©Ÿçš„ç«¯å£èƒ½é€£æ¥åˆ°containerä¸­\nç·Šæ¥è‘—æ˜¯ä»¥ä¸‹é€™è¡Œå‘½ä»¤\ndocker run -it --rm redis redis-cli -h host.docker.internal -p 6379\né€™è£¡åŒ…å«äº†ä¸‰å€‹é¡å¤–çš„ flagï¼š-itã€â€“rmã€-hï¼Œä»Šå¤©æˆ‘å€‘ä¹Ÿæœƒè¬›å¦‚ä½•åœ¨ container çš„ç’°å¢ƒä¸­è¨­å®šç’°å¢ƒè®Šæ•¸\nDocker Flag\nFlag æ—¨åœ¨åŠ å·¥dockerå‘½ä»¤çš„è¡Œç‚º  \n\nç°¡å–®èªªï¼Œimage æ˜¯ã€Œæ¨¡æ¿ã€ï¼Œè€Œ flag æ±ºå®šä½ æƒ³æ€éº¼ä½¿ç”¨é€™å€‹containerï¼Œä»Šå¤©è¦ä»‹ç´¹çš„æœ‰:\n\n-i\n-t\n-it\n-rm\n-e &#x2F; â€“env\n-h\n\n-i ä¿æŒ stdin é–‹å•Ÿï¼ˆinteractiveï¼‰docker run -i ubuntu bash\n\né©åˆä½ æƒ³ç›´æ¥é€²å…¥ container æˆ–çµ¦ç¨‹å¼è¼¸å…¥è³‡æ–™æ™‚ä½¿ç”¨\n\n\n-i &#x3D; interactive\nå³ä½¿æ²’æœ‰ terminalï¼Œä¹Ÿèƒ½è¼¸å…¥å‘½ä»¤æˆ–è³‡æ–™çµ¦container  \nå¸¸ç”¨æ–¼éœ€è¦ã€Œè¼¸å…¥ã€çš„ç¨‹å¼ï¼Œæ²’æœ‰ -i çš„è©±ï¼Œstdin æœƒç«‹å³é—œé–‰ï¼Œå¾ˆå¤š CLI æœƒç›´æ¥çµæŸ\n\n-t åˆ†é… pseudo-TTYï¼ˆterminalï¼‰docker run -t ubuntu bash\n\n-t &#x3D; terminal\nç‚º container åˆ†é…ä¸€å€‹ã€Œå‡ terminalã€è®“ç¨‹å¼ä»¥ç‚ºè‡ªå·±æ˜¯åœ¨çœŸæ­£çš„ terminal ä¸­åŸ·è¡Œ\næ²’æœ‰ -tï¼Œè¼¸å‡ºå¯èƒ½æ²’é¡è‰²ã€æç¤ºç¬¦ç•°å¸¸ï¼Œæˆ–ä¸èƒ½æ­£å¸¸äº’å‹•\n\n-it äº’å‹• flag çµ„åˆdocker run -it ubuntu bash\n\nå¹¾ä¹ç¸½æ˜¯ä¸€èµ·ä½¿ç”¨ï¼Œ -i ä¿ç•™è¼¸å…¥ -t æä¾› terminal\né©åˆ debugã€æ¸¬è©¦ã€æ“ä½œå‹ container\næ²’æœ‰å…¶ä¸­ä¸€å€‹ flagï¼Œäº’å‹•é«”é©—å°±ä¸å®Œæ•´\n\nèˆ‡ -dï¼ˆèƒŒæ™¯åŸ·è¡Œï¼‰å±¬æ–¼äº’æ–¥æ€ç¶­ï¼š\n\n-d â†’ èƒŒæ™¯æœå‹™å‹  \n-it â†’ å‰æ™¯äº’å‹•å‹\n\n\n\nâ€“rm å®¹å™¨åœæ­¢å¾Œè‡ªå‹•åˆªé™¤docker run --rm ubuntu echo &quot;Hello World&quot;\n\ncontainer åœæ­¢å¾Œè‡ªå‹•åˆªé™¤ï¼Œé©åˆè‡¨æ™‚æ¸¬è©¦æˆ–å–®æ¬¡åŸ·è¡Œçš„å®¹å™¨\nä¸å¿…æ‰‹å‹•æ¸…ç†ï¼Œé¿å…ç´¯ç©å¤§é‡åœæ­¢ container\n\n-e &#x2F; â€“env è¨­å®šç’°å¢ƒè®Šæ•¸docker run -e MY_VAR=123 ubuntu env\n\nåœ¨ container å…§è¨­ç½®ç’°å¢ƒè®Šæ•¸å¸¸ç”¨æ–¼ï¼šå¯†ç¢¼ã€å¸³è™Ÿã€API key\n\nå¤šå€‹è®Šæ•¸å¯ä»¥é‡è¤‡ä½¿ç”¨ -e\ndocker run -e VAR1=foo -e VAR2=bar ubuntu env\n\n-h è¨­å®š container ä¸»æ©Ÿåç¨±å¥—ç”¨ä¹‹å‰çš„ä¾‹å­\ndocker run -it --rm redis redis-cli -h host.docker.internal -p 6379\nå¦‚æœæˆ‘å€‘é€£ç·šæˆåŠŸæ‡‰è©²æœƒçœ‹åˆ°terminalé¡¯ç¤ºè‘—æˆ‘å€‘çš„hostname\n\nåœ¨ container è£¡ï¼Œ host.docker.internal æ˜¯ç”¨ä¾†å­˜å– å®¿ä¸»æ©Ÿï¼ˆhost machineï¼‰ çš„ä¸€å€‹ç‰¹æ®Š DNS åç¨±ã€‚å®ƒæ˜¯ Docker Desktopï¼ˆMac &#x2F; Windowsï¼‰å…§å»ºçš„ä¾¿åˆ©åŠŸèƒ½ï¼ŒLinux ä¸Šå‰‡éœ€é¡å¤–è¨­å®š\n\né©—æ”¶é€™æ™‚å€™å†å›ä¾†çœ‹ä»¥ä¸‹çš„æŒ‡ä»¤æ‡‰è©²å°±æ¸…æ™°äº†ä¸å°‘\ndocker run -it --rm redis redis-cli -h host.docker.internal -p 6379\næˆ‘å€‘é–‹å•Ÿä¸€å€‹redis containerä¸¦ä¸”é€é--rmè®“ä»–è‡ªå‹•åœ¨çµæŸçš„æ™‚å€™åˆªé™¤ï¼Œ-itæ—¢ä¿ç•™äº†stdinè¼¸å…¥ä¹Ÿè®“å¾ŒçºŒçš„æ“ä½œåˆ†é… terminal è®“CLIæ­£å¸¸ã€‚redis-cli -h host.docker.internal -p 6379é€™éƒ¨åˆ†æ˜¯ container å…§è¦å•Ÿå‹•çš„ processï¼Œé–‹å•Ÿredis-cliï¼Œä¸¦ä¸”ç”¨-hæŠŠä¸»æ©Ÿåç¨±è¨­ç‚ºâ€host.docker.internalâ€ç„¶å¾Œ-pé€£ç·šåˆ°6379 port\nç‚ºç”šéº¼æ²’æœ‰port mapping?ä¸Šä¸€ç¯‡ä»‹ç´¹éport mappingæ˜¯é€é -p &lt;host_port&gt;:&lt;container_port&gt; ï¼Œå…¶å¯¦ä»–æ˜¯ç­‰åƒ¹æ–¼-h host.docker.internal -p 6379çš„ï¼Œå› ç‚º host.docker.internalä»£è¡¨çš„æ˜¯æœ¬æ©Ÿ(host machine)ï¼Œæ‰€ä»¥å…©è€…çš„æ•ˆæœéƒ½æ˜¯ æœ¬æ©Ÿ:6379  â†â†’  Redis container:6379\n\n\nç¸½çµä»¥ä¸Šå°±æ˜¯æˆ‘å€‘ä»Šå¤©æ‰€ä»‹ç´¹çš„flagï¼Œç•¶ç„¶é‚„æœ‰ä¸€äº›ä¾‹å¦‚: -v -fç­‰ç­‰ ä½†ä»–å€‘å€¼å¾—ä¸€å€‹é¡å¤–çš„ç¯‡å¹…ã€‚ \né€™é‚Šä¸€æ¨£å¹«å¤§å®¶æ•´ç†äº†è¡¨æ ¼:  \n\n\n\nFlag\nä½œç”¨\nä½¿ç”¨æƒ…å¢ƒ\n\n\n\n-d\nèƒŒæ™¯åŸ·è¡Œ container\nServer &#x2F; daemon å‹ container\n\n\n-i\nä¿æŒ stdin é–‹å•Ÿï¼ˆinteractiveï¼‰\néœ€è¦è¼¸å…¥è³‡æ–™çš„ç¨‹å¼ã€äº’å‹•å¼ CLI\n\n\n-t\nåˆ†é… pseudo-TTY terminal\nè®“ç¨‹å¼ä»¥ç‚ºè‡ªå·±åœ¨çœŸ terminal ä¸­åŸ·è¡Œï¼Œæä¾›æ­£ç¢ºæç¤ºç¬¦ã€é¡è‰²ã€è¡Œç‚º\n\n\n-it\näº’å‹•æ¨¡å¼ï¼ˆ-i + -tï¼‰\nDebugã€æ“ä½œå‹ containerã€é€²å…¥ shell\n\n\n--rm\nåœæ­¢å¾Œè‡ªå‹•åˆªé™¤ container\nè‡¨æ™‚æ¸¬è©¦æˆ–å–®æ¬¡åŸ·è¡Œçš„å®¹å™¨\n\n\n-e &#x2F; --env\nè¨­å®šç’°å¢ƒè®Šæ•¸\nèª¿æ•´ç¨‹å¼è¡Œç‚ºã€è¨­å®šå¯†ç¢¼æˆ– API key\n\n\n-h\nè¨­å®š container hostname\nNetwork &#x2F; å®¹å™¨è¾¨è­˜ã€å…§éƒ¨é€šä¿¡\n\n\næ¥ä¸‹ä¾†å°±å¯ä»¥èªè­˜Dockerfileä¸¦è£½ä½œä½ ç¬¬ä¸€ä»½çš„ æ˜ åƒæª”(Image) å•¦\n\n  è¬è¬é–±è®€åˆ°é€™è£¡çš„ä½ &#x2F;å¦³å¦‚æœè¦ºå¾—æ–‡ç« å°æ‚¨æœ‰å¹«åŠ©ä¸å¦¨æŒ‰å€‹å–œæ­¡è‹¥æœ‰ä»»ä½•ç–‘å•ä¹Ÿæ­¡è¿åº•ä¸‹ç•™è¨€\n\n\n","categories":["Docker"],"tags":["Docker","Container","Backend"]},{"title":"Hello World","url":"/%E7%A7%91%E6%99%AE/hello-world/","content":"å‰è¨€é‚„è¨˜å¾—ç•¶æ™‚å­¸ç¿’ç¨‹å¼çš„ç¬¬ä¸€æ®µç¨‹å¼ç¢¼å—?å—¯â€¦è®“æˆ‘çŒœçŒœä¸€å®šæ˜¯Hello Worldå°å§!å…ˆä¸è¦è‘—æ€¥å•æˆ‘æ€éº¼çŸ¥é“çš„ ä¹Ÿå…ˆæŠŠå´‡æ‹œçš„ç›®å…‰æ”¶è‘—å› ç‚ºæ¥ä¸‹ä¾†æˆ‘å€‘å°‡æœƒäº†è§£é€™å€‹å°ˆå±¬å·¥ç¨‹å¸«çš„æµªæ¼«ğŸ’–\n\n\nç·£èµ·\nå¦‚æœè¦ç”¨ä¸€å¥è©±ä¾†è¿æ¥ä¸€è¶Ÿæ–°ä¸–ç•Œçš„å•Ÿç¨‹ ä½ æœƒå¦‚ä½•èµ·é ­  \n\nè¥¿å…ƒ1972å¹´ï¼Œä½æ–¼ç¾åœ‹ç´æ¾¤è¥¿å·çš„è«¾åŸºäºè²çˆ¾å¯¦é©—å®¤ï¼Œä¸€åå‚³å¥‡å·¥ç¨‹å¸«â€“å¸ƒèŠæ©Â·å…‹å°¼æ¼¢(Brian Kernighan) è‘—æ‰‹æ’°å¯«äº†ä¸€ä»½å…§éƒ¨æª”æ¡ˆ A Tutorial Introduction to the Language B è€Œå…¶ä¸­çš„Bèªè¨€ä¹Ÿå°±æ˜¯æˆ‘å€‘æ—¥å¾Œæ‰€ç†ŸçŸ¥çš„Cèªè¨€çš„å‰èº«ã€‚åœ¨é€™ä»½å ±å‘Šçš„å…¶ä¸­ç¬¬ä¸€æ¬¡æåˆ°äº†Hello Worldçš„å­—æ®µï¼Œé›–ç„¶åœ¨ç•¶æ™‚æ˜¯ä¸€æ®µä½œç‚ºä½¿ç”¨å¤–éƒ¨è®Šé‡(external variable)çš„ç¤ºä¾‹ï¼Œä½†ä¹Ÿè¶³ä»¥è«­ç¤ºè‘—äººé¡èˆ‡é›»è…¦èªè¨€çš„æ·±åˆ»é€£çµ  \nBmain( ) &#123;extrn a, b, c;putchar(a); putchar(b); putchar(c); putchar(â€™!*nâ€™);&#125;a â€™hellâ€™;b â€™o, wâ€™;c â€™orldâ€™;\nè‹¥ä½ å°ä¸Šé¢çš„ç¨‹å¼ç¢¼æ„Ÿåˆ°é™Œç”Ÿä¹Ÿå®Œå…¨æ²’é—œä¿‚ï¼Œåæ­£æˆ‘æ˜¯å·²ç¶“çœ‹å¾—è€æ·šç¸±æ©«äº†ğŸ˜­ é‚£éº¼ä¾†çœ‹çœ‹ä»¥ä¸‹æœ‰æ²’æœ‰å°ˆå±¬æ–¼ä½ ç•¶åˆå­¸ç¿’ç¨‹å¼èªè¨€çš„ç¾å¥½å›æ†¶å§\nC#include &lt;stdio.h&gt;int main(void) &#123;    printf(&quot;Hello, World!\\n&quot;);    return 0;&#125;\nC++#include &lt;iostream&gt;int main() &#123;    std::cout &lt;&lt; &quot;Hello, World!&quot; &lt;&lt; std::endl;    return 0;&#125;\nJavapublic class Main &#123;    public static void main(String[] args) &#123;        System.out.println(&quot;Hello, World!&quot;);    &#125;&#125;\nC#using System;class Program &#123;    static void Main() &#123;        Console.WriteLine(&quot;Hello, World!&quot;);    &#125;&#125;\nRubyputs &quot;Hello, World!&quot;\nPHP&lt;?phpecho &quot;Hello, World!\\n&quot;;\nRprint(&quot;Hello, World!&quot;)\nPythonprint(&quot;Hello, World!&quot;)\nJavaScriptconsole.log(&quot;Hello, World!&quot;);\nSwiftprint(&quot;Hello, World!&quot;)\nGopackage mainimport &quot;fmt&quot;func main() &#123;    fmt.Println(&quot;Hello, World!&quot;)&#125;\nRustfn main() &#123;    println!(&quot;Hello, World!&quot;);&#125;\n\næ‰€ä»¥å‘€ ä¸è¦å†èªªç†å·¥ç”·éƒ½æ˜¯æœ¨é ­ç›´ç”·ğŸªµäº†ï¼Œä»–å€‘ä¸ä¸€å®šæœƒå°å¦³èªª100æ¬¡çš„â€æˆ‘æ„›å¦³â€ï¼Œä½†ä¸€å®šæœ‰100ç¨®æ–¹å¼(X)\nçµèªåˆä¾†ä¹åˆ°ï¼Œé€™ç¯‡æ˜¯ä½œè€…çš„ç¬¬ä¸€ç¯‡æ–‡ç« æœŸè¨±æ—¥å¾Œæˆ‘é‚„èƒ½ç¹¼çºŒæ›´æ–° ä¹Ÿèƒ½ç•¶ä½œå¯«çµ¦è‡ªå·±çš„ç­†è¨˜  \né’å±±ç¶ æ°´éŸ»ç•™é•· æ¡ƒèŠ±å‚æŸ³æ„ç•™é¦™\n\n  è¬è¬é–±è®€åˆ°é€™è£¡çš„ä½ &#x2F;å¦³å¦‚æœè¦ºå¾—æ–‡ç« å°æ‚¨æœ‰å¹«åŠ©ä¸å¦¨æŒ‰å€‹å–œæ­¡è‹¥æœ‰ä»»ä½•ç–‘å•ä¹Ÿæ­¡è¿åº•ä¸‹ç•™è¨€\n\n\n","categories":["ç§‘æ™®"]},{"title":"ç”¨Dockerfileè£½ä½œä¸€ä»½æ˜ åƒæª”ä¾†å•Ÿå‹•Pythonæœå‹™å§","url":"/Docker/%E7%94%A8Dockerfile%E8%A3%BD%E4%BD%9C%E4%B8%80%E4%BB%BD%E6%98%A0%E5%83%8F%E6%AA%94%E4%BE%86%E5%95%9F%E5%8B%95Python%E6%9C%8D%E5%8B%99%E5%90%A7/","content":"å‰è¨€å‰é¢å¹¾ç¯‡æˆ‘å€‘ä¸€ç›´åœ¨ä½¿ç”¨ã€Œç¾æˆçš„ imageã€(ä¾‹å¦‚ redis)ä½†ä½ ä¸€å®šæœƒé–‹å§‹å¥½å¥‡ä¸€ä»¶äº‹ï¼š\n\nimage åˆ°åº•æ˜¯æ€éº¼è¢«åšå‡ºä¾†çš„ï¼Ÿ\n\né€™ä¸€ç¯‡ï¼Œæˆ‘å€‘å°±ç”¨ä¸€å€‹æœ€å°å¯åŸ·è¡Œã€çœ‹å¾—åˆ°æ•ˆæœçš„ Flask Hello World demoä¸€æ­¥ä¸€æ­¥èªè­˜ï¼š\n\nDockerfile çš„è§’è‰²\nbase image çš„æ„ç¾©\nCOPY &#x2F; RUN &#x2F; CMD &#x2F; â€¦ å„è‡ªè² è²¬ä»€éº¼\n\n\n\nDockerfileæ˜¯ç”šéº¼Dockerfileç°¡å–®ä¾†èªªå°±æ˜¯ç”±ä¸€è¡Œä¸€è¡Œçš„æŒ‡ä»¤çµ„æˆ ç›®çš„å°±æ˜¯ä½¿å¾—Docker Engineèƒ½ä¾ç…§è©²æª”æ¡ˆè£½ä½œå‡ºæ˜ åƒæª”(Image)è€Œé€™ä»½ç‰¹æ®Šçš„æª”æ¡ˆå°±å«åš Dockerfile ï¼Œæ²’éŒ¯ä»–ä¸æ˜¯ç”šéº¼å¾Œç¶´åç¨±åˆæˆ–æ˜¯å‰¯æª”åï¼Œä»–å°±å«åšDockerfile\nDockerfile ä¸¦ä¸æ˜¯åœ¨æ“ä½œ containerï¼Œè€Œæ˜¯åœ¨å®šç¾© imageè€Œ image ä¸­çš„è¨­å®šï¼Œæœƒåœ¨ container å•Ÿå‹•æ™‚æˆç‚ºå…¶åŸ·è¡Œç’°å¢ƒçš„ä¸€éƒ¨åˆ†ã€‚\nç¯„ä¾‹ç›®æ¨™æˆ‘å€‘è¦å®Œæˆçš„äº‹æƒ…å¾ˆå–®ç´”ï¼š\n\nç”¨ Python å¯«ä¸€å€‹ Flask Hello World\nç”¨ Dockerfile æŠŠå®ƒåŒ…æˆ image\nç”¨ docker run è·‘æˆ container\né€éç€è¦½å™¨çœ‹åˆ°çµæœ\n\n\nå°ˆæ¡ˆçµæ§‹flask-docker-demo/â”œâ”€â”€ app.pyâ””â”€â”€ Dockerfile\n\nPython ç¨‹å¼ç¢¼ç›¸ä¿¡å¤§å®¶æˆ–å¤šæˆ–å°‘éƒ½æœ‰å¯«éPythonï¼Œæ²’æœ‰ä¹Ÿæ²’é—œä¿‚ å› ç‚ºä»Šå¤©ç”¨åˆ°çš„èªæ³•å®Œå…¨ä¸æ˜¯é‡é»! ç›´æ¥è¤‡è£½ä»¥ä¸‹ç¨‹å¼ç¢¼åˆ°å‰›å‰›å»ºç«‹çš„app.pyå°±å¥½å’¯\nfrom flask import Flaskapp = Flask(__name__)@app.route(&quot;/&quot;)def hello():    return &quot;Hello from Docker + Flask!&quot;if __name__ == &quot;__main__&quot;:    # portå¯ä»¥éš¨æ„è¨­å®š åªè¦è‡ªå·±è¨˜å¾—å¤šå°‘å°±è¡ŒXD    app.run(host=&quot;0.0.0.0&quot;, port=5000)\nç‚ºä»€éº¼è¦ host&#x3D;â€0.0.0.0â€ï¼ŸDocker container æœ‰è‡ªå·±çš„ network namespaceå¦‚æœåªç›£è½æŸå€‹ç‰¹å®šçš„hostnameå¤–éƒ¨æ˜¯é€£ä¸åˆ°çš„ã€‚0.0.0.0 ä»£è¡¨ã€Œæ¥å—æ‰€æœ‰ç¶²è·¯ä»‹é¢ã€  \n\n\nDockerfile å»ºç«‹å¯ä»¥å…ˆæŠŠä»¥ä¸‹çš„å…§å®¹è¤‡è£½ï¼Œæˆ‘å€‘å†ä¸€è¡Œä¸€è¡Œæ‹†è§£\n# 1. Base imageFROM python:3.12-slim# 2. è¨­å®šå·¥ä½œç›®éŒ„WORKDIR /app# 3. è¤‡è£½ç¨‹å¼ç¢¼é€² imageCOPY app.py .# 4. å®‰è£ç›¸ä¾å¥—ä»¶RUN pip install flask# 5. container å•Ÿå‹•æ™‚è¦åŸ·è¡Œçš„å‘½ä»¤CMD [&quot;python&quot;, &quot;app.py&quot;]\n\nFrom æŒ‡ä»¤FROM python:3.12-slim\n\né€™è¡Œä»£è¡¨æˆ‘å€‘å‰µå»ºçš„image æ˜¯å»ºç«‹åœ¨ python:3.12-slim é€™ä»½base imageä¹‹ä¸Šï¼Œé€™æ˜¯å¿…è¦ä¸”é—œéµçš„ä¸€æ­¥ã€‚ è‡³æ–¼base imageçš„æŒ‘é¸ä¸€æ¨£å¯ä»¥å»Docker hubä¸Šé¸æ“‡\nä¹Ÿå°±æ˜¯èªªï¼š\n\nå·²ç¶“æœ‰ Linux user space\nå·²ç¶“æœ‰ Python runtime\n\næˆ‘å€‘ä¸ç”¨å¾é›¶é–‹å§‹å®‰è£ä½œæ¥­ç³»çµ±èˆ‡ Python\nğŸ“Œ é‡é»è§€å¿µï¼šDocker image æ˜¯ã€Œä¸€å±¤ä¸€å±¤ç–ŠåŠ ã€çš„ï¼Œæ¯å€‹ image å¹¾ä¹éƒ½æ˜¯å¾æŸå€‹ base image é–‹å§‹\nbase image å¾Œé¢çš„slimä»£è¡¨ç”šéº¼?python:3.12 &#x3D;&gt; ç’°å¢ƒä¸­Pythonçš„ç‰ˆæœ¬è€Œå¾Œç¶´çš„æ„æ€æŒ‡çš„æ˜¯ä¸åŒåº•å±¤OSæœƒç›´æ¥å½±éŸ¿ï¼š\n\nimage çš„å¤§å°(ç”±å°åˆ°å¤§: alpine -&gt; slim -&gt; bullseye -&gt; bookworm)\né è¨­åŒ…å«çš„ç³»çµ±å·¥å…·æ•¸é‡\nå¥—ä»¶ç›¸å®¹æ€§(ç‰¹åˆ¥æ˜¯ pip å¥—ä»¶)\næ˜¯å¦éœ€è¦è‡ªè¡Œç·¨è­¯ native library\n\n\n\nä¹Ÿå› æ­¤ï¼Œé¸æ“‡é©åˆçš„ base imageï¼Œé æ¯”ã€Œé¸æœ€æ–°ç‰ˆæœ¬ã€ä¾†å¾—é‡è¦ã€‚\nWORKDIR è¨­å®šå·¥ä½œç›®éŒ„WORKDIR /app\n\nç°¡å–®ä¾†èªªå°±æ˜¯åœ¨containerå•Ÿå‹•å¾ŒæŒ‡æ´¾ä¸€å€‹å·¥ä½œç›®éŒ„ è®“ä¹‹å¾Œæ‰€æœ‰çš„æŒ‡ä»¤éƒ½é‹è¡Œåœ¨æ­¤å·¥ä½œç›®éŒ„ä¹‹ä¸‹ã€‚è¬›ç™½äº† WORKDIR /path/to/dir å°±æ˜¯åšäº†å…©ä»¶äº‹æƒ…:\n\nå¦‚æœè©²ç›®éŒ„å·²å­˜åœ¨ å‰‡cdé€²å»\nè‹¥è©²ç›®éŒ„ä¸å­˜åœ¨ å‰‡å…ˆå‰µå»ºå†cdé€²å»\n\n\næ¯”èµ·æ‰‹å‹•å»ºç«‹å†è·³è½‰ç›®éŒ„ï¼Œå®˜æ–¹å»ºè­°ç›´æ¥å¯«WORKDIR  \n\nCOPY &lt;ä¾†æº&gt; &lt;ç›®çš„åœ°&gt;COPY app.py .\n\nä»–çš„æ„æ€ç›¸ç•¶ç›´è¦º:\n\nå¾ã€Œbuild contextï¼ˆä½ çš„å°ˆæ¡ˆè³‡æ–™å¤¾ï¼‰ã€æŠŠ app.py è¤‡è£½åˆ° image metadata ä¸­å®šç¾©çš„ WORKDIR (æœƒåœ¨ container runtime ç”Ÿæ•ˆï¼Œä¹Ÿå°±æ˜¯ &#x2F;app)\n\nimage æ˜¯ä¸å¯è®Šçš„COPY ç™¼ç”Ÿåœ¨ build timeï¼Œä¸æ˜¯ runtimeä¿®æ”¹åŸå§‹æª”æ¡ˆå¾Œï¼Œä¸€å®šè¦é‡æ–° build image  \n\n\nRUN: åœ¨ image build æ™‚åŸ·è¡Œå‘½ä»¤RUN pip install flask\n\nåœ¨ build image çš„éç¨‹ä¸­å•Ÿå‹•ä¸€å€‹æš«æ™‚çš„ container ä¸¦åŸ·è¡ŒæŒ‡ä»¤ï¼Œå†æŠŠçµæœå­˜æˆ image layer  \né€™é‚Šé€™æ¨£å¯«æ˜¯å› ç‚ºåœ¨containerç’°å¢ƒä¸‹æ˜¯æ²’æœ‰flaské€™å€‹å¥—ä»¶çš„ï¼Œæ‰€ä»¥æˆ‘å€‘éœ€è¦å®‰è£å¿…è¦çš„å¤–éƒ¨ä¾è³´ã€‚å€¼å¾—æ³¨æ„çš„æ˜¯ RUN &lt;command&gt; å¯ä»¥æœ‰å¤šå€‹\nCMD: Container å•Ÿå‹•æ™‚è¦åšä»€éº¼ï¼ŸCMD [&quot;python&quot;, &quot;app.py&quot;]\n\n\nç•¶ container è¢«å•Ÿå‹•æ™‚ï¼Œé è¨­åŸ·è¡Œé€™å€‹ command\n\nè€Œæˆ‘å€‘æœƒæŠŠæŒ‡ä»¤ä¸­é–“çš„ç©ºæ ¼ç”¨â€ï¼Œâ€éš”é–‹å¯«é€²CMD  \nRUNè·ŸCMDçš„å·®ç•°\n\n\næŒ‡ä»¤\nåŸ·è¡Œæ™‚æ©Ÿ\n\n\n\nRUN\nbuild image æ™‚\n\n\nCMD\nrun container æ™‚\n\n\nğŸ“Œ ä¸€å€‹ Dockerfile åªèƒ½æœ‰ä¸€å€‹ CMD  \n\n\nBuild Imagedocker build -t flask-demo .\n-t è¡¨ç¤ºimage åç¨±æœ€å¾Œçš„é€™å€‹.å¯ä¸èƒ½çœç•¥ï¼Œå®ƒä»£è¡¨çš„æ˜¯ build context (Dockerfile æ‰€åœ¨ç›®éŒ„) ä¹Ÿå°±æ˜¯ç•¶å‰ç›®éŒ„  \nåŸ·è¡Œå®Œæˆå¾Œæˆ‘å€‘ä¸€æ¨£ç”¨docker imagesæ˜¯å¦æˆåŠŸå‡ºç¾å‰›å‰›å»ºç«‹å¥½çš„æ˜ è±¡æª”\nç„¶å¾Œæˆ‘å€‘æ¥è‘—å•Ÿå‹•containerï¼Œä¸€æ¨£è¼¸å…¥\ndocker run -d --name flask-server -p 5000:5000 flask-demo\nè¨˜å¾—-på¦‚æœä¸æ˜¯ä½¿ç”¨ç¯„ä¾‹çš„5000portçš„è©±è¦ç”¨ä½ è‡ªå·±çš„!ç„¶å¾Œä½¿ç”¨docker psæŸ¥çœ‹ï¼ŒæˆåŠŸä¹‹å¾Œå»ç€è¦½å™¨æ‰“é–‹http://localhost:5000å°±æœƒçœ‹åˆ°çµæœäº†ğŸ‰  \nç¸½çµå®Œæˆä¸€å€‹æ˜ åƒæª”çš„å»ºç«‹æ‡‰è©²ç›¸ç•¶æœ‰æˆå°±æ„Ÿå§! è€Œä¸”ä¹Ÿæ²’æœ‰æƒ³åƒä¸­çš„å›°é›£ï¼Œæœ€å¾Œæˆ‘å€‘ä¸€æ¨£åšä¸€å€‹é‡é»æ•´ç†:  \n\nDockerfile æ“ä½œçš„å°è±¡æ˜¯ imageï¼Œè€Œä¸æ˜¯ container\nWORKDIRã€ENVã€CMD ç­‰è¨­å®šï¼Œæ˜¯è¢«å¯«é€² image çš„ metadataï¼Œ ç•¶ image è¢« docker run å•Ÿå‹•æ™‚ï¼Œé€™äº›è¨­å®šæ‰æœƒæˆç‚º container çš„åŸ·è¡Œç’°å¢ƒ\nCOPY app.py . ä¸­çš„ . æŒ‡çš„æ˜¯ image ä¸­å®šç¾©çš„ WORKDIR\n\næœ€å¾Œä¹Ÿåˆ¥å¿˜äº†çµ¦è‡ªå·±100å€‹æŒè²é˜¿ğŸ‘æœŸå¾…ä¸‹æ¬¡å†ä¾†ä»‹ç´¹æ›´é€²éšçš„docker compose\n\n  è¬è¬é–±è®€åˆ°é€™è£¡çš„ä½ &#x2F;å¦³å¦‚æœè¦ºå¾—æ–‡ç« å°æ‚¨æœ‰å¹«åŠ©ä¸å¦¨æŒ‰å€‹å–œæ­¡è‹¥æœ‰ä»»ä½•ç–‘å•ä¹Ÿæ­¡è¿åº•ä¸‹ç•™è¨€\n\n\n","categories":["Docker"],"tags":["Docker","Backend","Python","Flask"]},{"title":"éœ€è¦å¤šå€‹Containeræ€éº¼è¾¦? ç‚ºç”šéº¼è¦ç”¨Docker Compose?","url":"/Docker/%E9%9C%80%E8%A6%81%E5%A4%9A%E5%80%8BContainer%E6%80%8E%E9%BA%BC%E8%BE%A6-%E7%82%BA%E7%94%9A%E9%BA%BC%E8%A6%81%E7%94%A8Docker-Compose/","content":"å‰è¨€åœ¨å‰é¢çš„å¹¾ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘å€‘å·²ç¶“å­¸æœƒäº†å¦‚ä½•ä½¿ç”¨ Docker å»ºç«‹ imageã€å•Ÿå‹• containerï¼Œä¹Ÿç†è§£äº† base imageã€WORKDIRã€COPY ç­‰èƒŒå¾Œçš„è¨­è¨ˆæ¦‚å¿µã€‚\nä½†åœ¨å¯¦éš›é–‹ç™¼ä¸­ï¼Œæœå‹™å¾€å¾€ä¸åªä¸€å€‹ containerã€‚\nèˆ‰ä¾‹ä¾†èªªï¼š\n\nä¸€å€‹å¾Œç«¯æœå‹™ï¼ˆFlask &#x2F; FastAPI &#x2F; Node.jsï¼‰\næ­é…ä¸€å€‹å¿«å–æˆ–è³‡æ–™åº«ï¼ˆRedis &#x2F; PostgreSQLï¼‰\n\né€™æ™‚å€™å•é¡Œå°±ä¾†äº†ï¼š\n\ncontainer ä¹‹é–“è¦æ€éº¼é€£ç·šï¼Ÿå•Ÿå‹•é †åºèª°ä¾†ç®¡ï¼Ÿæ¯æ¬¡éƒ½è¦æ‰“ä¸€é•·ä¸² docker run å—ï¼Ÿ  \n\nå¦‚æœé€™æ™‚å€™æœ‰ä¸€å€‹æ–¹æ³•èƒ½å¤ ä¸€æ¬¡ç®¡ç†é€™äº›containerçš„å•Ÿå‹•èˆ‡è¨­å®šè©²æœ‰å¤šå¥½!\n\n\nç›®æ¨™ç¯„ä¾‹é‚„è¨˜å¾—æˆ‘å€‘å‰å¹¾ç¯‡ä½¿ç”¨åˆ°çš„Python+flaskä»¥åŠrediså—? é€™ç¯‡æœƒçµåˆé€™äº›è€æœ‹å‹åšä¸€å€‹ç°¡å–®çš„äº¤äº’  \næˆ‘å€‘çš„ demo éå¸¸å–®ç´”ï¼š\n\nFlask æœå‹™å•Ÿå‹•å¾Œï¼Œå…ˆå° Redis å­˜å…¥ä¸€ç­†è³‡æ–™\næ‰“é–‹ç€è¦½å™¨å­˜å– localhost\né¡¯ç¤º Redis ä¸­çš„å…§å®¹\n\n\næˆ‘å€‘æœƒå…ˆç”¨å‚³çµ±çš„æ–¹å¼ç¨ç«‹é–‹å•Ÿå…©å€‹container ç„¶å¾Œå†ç”¨docker composeçš„æ–¹æ³•ï¼Œé€™æ¨£å¯ä»¥æ¸…æ™°çš„æ¯”è¼ƒå·®ç•°!\nå‚³çµ±æ–¹å¼ï¼ˆæ‰‹å‹•å•Ÿå‹•å…©å€‹ containerï¼‰Step 0: å°ˆæ¡ˆçµæ§‹flask-docker-compose-demo/â”œâ”€â”€ app.pyâ”œâ”€â”€ requirements.txtâ””â”€â”€ Dockerfile\n\nStep 1ï¼šå•Ÿå‹• Redis containerdocker run -d --name my-redis -p 6379:6379 redis:latest\né€™è£¡æˆ‘å€‘å…ˆæŠŠ Redis è·‘èµ·ä¾†ï¼Œä¸¦æ˜ å°„ portï¼Œè®“ host å¯ä»¥é€£ç·š\nStep 2ï¼šç·¨è¼¯ app.py å’Œ requirements.txtapp.py\nfrom flask import Flaskimport redisapp = Flask(__name__)r = redis.Redis(  # é€™è¡Œéå¸¸é‡è¦ï¼Œä¸ç„¶ç„¡æ³•è®“containeräº’ç›¸é€£ç·š  host=&quot;host.docker.internal&quot;,  port=6379,  decode_responses=True)r.set(&quot;message&quot;, &quot;Hello Flask and Redis&quot;)@app.route(&quot;/&quot;)def hello():  return r.get(&quot;message&quot;)if __name__ == &quot;__main__&quot;:  # portå¯ä»¥éš¨æ„è¨­å®š åªè¦è‡ªå·±è¨˜å¾—å¤šå°‘å°±è¡ŒXD  app.run(host=&quot;0.0.0.0&quot;, port=5000)\né€™è£¡ä½ æœƒæ³¨æ„åˆ°ä¸€ä»¶äº‹ï¼šflask container å¿…é ˆçŸ¥é“ redis åœ¨å“ªè£¡è€Œåœ¨æ­¤æƒ…æ³ä¸‹ æˆ‘å€‘åªèƒ½æ‰‹å‹•è¨­å®šhoståˆ° host.docker.internalï¼Œç„¶è€Œé€™æ¨£ä¸€ä¾†å¾ˆéº»ç…© äºŒä¾†ä¹Ÿä¸æ˜¯é•·ä¹…ä¹‹è¨ˆ\nrequirements.txt\nflaskredis\n\nStep 3: DockerfileFROM python:3.12-slimWORKDIR /appCOPY requirements.txt .RUN pip install --no-cache-dir -r requirements.txtCOPY app.py .CMD [&quot;python&quot;, &quot;app.py&quot;]\n\nStep 4: Build Docker Imagedocker build -t my-flask .\n\nStep 5: å•Ÿå‹•æœå‹™ä¸¦å¯Ÿçœ‹çµæœdocker run -d --rm -p 5000:5000 my-flask\nå†åˆ°ç€è¦½å™¨è¼¸å…¥ http://localhost:5000 æœ‰é †åˆ©çœ‹åˆ°çµæœå°±è¡¨ç¤ºæˆåŠŸå•¦!\né›–ç„¶æˆåŠŸçœ‹åˆ°ç•«é¢ï¼Œä½†ä½ å¯èƒ½å·²ç¶“éš±ç´„æ„Ÿè¦ºåˆ°å“ªè£¡æ€ªæ€ªçš„ã€‚é€™ç¨®åšæ³•ä¸æ˜¯éŒ¯ï¼Œä½†ç¼ºé»å¾ˆæ˜é¡¯ï¼š\n\nRedis èˆ‡ Flask æ²’æœ‰çœŸæ­£ã€Œåœ¨åŒä¸€å€‹ç’°å¢ƒã€\nå¿…é ˆæ‰‹å‹•ç®¡ç† port\ncontainer ä¸€å¤šï¼ŒæŒ‡ä»¤é–‹å§‹è®Šå¾—å†—é•·\nå•Ÿå‹•é †åºè¦è‡ªå·±é¡§(è¦å…ˆé–‹redisæ‰èƒ½é–‹å•Ÿflaskæœå‹™)\n\nç”šéº¼æ˜¯ docker compose\ndocker compose æ˜¯ç”¨ä¾†ã€Œå®šç¾©ä¸¦ç®¡ç†å¤šå€‹ containerã€çš„å·¥å…·\n\nå®ƒè®“æˆ‘å€‘å¯ä»¥ç”¨ä¸€å€‹æª”æ¡ˆæè¿°ä¸¦å•Ÿå‹•ï¼š\n\næœ‰å“ªäº›æœå‹™\næ€éº¼é€£ç·š\nå•Ÿå‹•é †åº\nport è¨­å®š\nâ€¦\n\nä»–çš„æª”åå¿…é ˆç‚º docker-compose.yml æ˜¯å€‹ yml æ ¼å¼çš„æª”æ¡ˆï¼Œæ‰€ä»¥æ ¼å¼è¦æ±‚æ¯”è¼ƒåš´æ ¼(ä½†å…¼å®¹ json)\nStep 1: ä¿®æ”¹ä¸€ä¸‹ app.pyr = redis.Redis(  host=&quot;redis&quot;, # é€™è£¡æ”¹æˆrediså°±å¥½ï¼Œä¹Ÿå°±æ˜¯åº•ä¸‹docker-composeå®šç¾©çš„è©²æœå‹™çš„åç¨±  port=6379,  decode_responses=True)\n\nStep 2: å‰µå»º docker-compose.ymlæˆ‘å€‘ä¸€æ¨£åœ¨root directoryæ–°å»º docker-compose.yml\nversion: &quot;3.9&quot;services:  flask:    build: .    ports:      - &quot;5000:5000&quot;    depends_on:      - redis  redis:    image: redis:latest\n\næˆ‘å€‘å…ˆæŒ‡åä¸€å€‹docker-compose.yml çš„èªæ³•ç‰ˆæœ¬(ä½†åœ¨v2 pluginå·²ç¶“ä¸æ˜¯å¿…è¦çš„äº†)\nservicesä»£è¡¨çš„æ˜¯æ‰€è¦å•Ÿå‹•çš„containersï¼Œä¸¦ä¸”ä»–å€‘æœƒé è¨­å­˜åœ¨æ–¼åŒå€‹ç¶²è·¯(Docker network)ä¸‹\nflask å’Œ redis åˆ†åˆ¥æ˜¯é€™å…©å€‹æœå‹™çš„åç¨±ï¼Œå¯ä»¥çœ‹åˆ° flask æ˜¯é€é build æŒ‡ä»¤å»æŒ‡åDockerfileæ‰€åœ¨çš„ä½ç½®(ä¹Ÿå°±æ˜¯root directoryï¼Œæ‰€ä»¥ç”¨ . ) ä¸¦å»ºç«‹Imageå¾Œé–‹å•Ÿcontainerï¼Œè€Œ redis æ˜¯é€éç¾æˆImageç›´æ¥å•Ÿå‹•çš„\nå†è€… flask åˆ©ç”¨ port mapping æˆåŠŸè®“æˆ‘å€‘å¯ä»¥é€éç€è¦½å™¨é€£æ¥ï¼Œè€Œredisä¸ç”¨å°å¤–æš´éœ² ä¸” flask å¯ä»¥ç›´æ¥é€£æ¥åˆ°ä»–æ˜¯å› ç‚ºä»–å€‘è¢«å‰µå»ºæ–¼åŒå€‹ç¶²è·¯åº•ä¸‹ï¼Œé€™ä¹Ÿæ˜¯ä½¿ç”¨ docker-compose çš„ä¸€å¤§å¥½è™•\næœ€å¾Œçš„ depends_on ç¢ºä¿äº†æœå‹™çš„å•Ÿå‹•é †åºï¼Œæˆ‘å€‘å°±ä¸ç”¨æ‰‹å‹•å…ˆé–‹å•Ÿ redis æ‰èƒ½é–‹ flask æœå‹™\nStep 3: å•Ÿå‹• docker composeè·Ÿå•Ÿå‹•containerå¾ˆé¡ä¼¼ è¼¸å…¥ä¸€è¡Œ\ndocker compose up --build\n\né—œæ–¼å•Ÿå‹•æŒ‡ä»¤ä¸€èˆ¬ä¾†èªªè¦å•Ÿå‹•docker composeæ˜¯é€é docker compose upï¼Œä½†ä»–é è¨­æ˜¯ä¸æœƒé‡æ–°build Dockerfileï¼Œæ‰€ä»¥è‹¥æ˜¯ä¾†æºç¨‹å¼ç¢¼æˆ–ç›®æ¨™Dockerfileæœ‰ä¿®æ”¹äº†ï¼Œå‰‡ä½¿ç”¨ docker compose up --build æ‰æ›´æ­£ç¢º  \n\n\nä¸€æ¨£åˆ°ç€è¦½å™¨è¼¸å…¥ http://localhost:5000 æœ‰é †åˆ©çœ‹åˆ°çµæœå°±è¡¨ç¤ºæˆåŠŸå•¦ğŸ‰ğŸ‰ğŸ‰\næœ€å¾ŒåŸ·è¡Œ docker compose down ä¾†é—œé–‰æœå‹™\nç¸½çµ\ndocker compose æœ€å¤§çš„å¥½è™•æ˜¯ç•¶containerè®Šå¤šæ™‚ï¼Œèƒ½é«˜æ•ˆä¸”å®‰å…¨çš„ç®¡ç†ç’°å¢ƒç´°ç¯€\n\né€é Docker Composeï¼š\n\nä½ å¯ä»¥æŠŠã€Œç’°å¢ƒçµæ§‹ã€å¯«æˆç¨‹å¼ç¢¼\ncontainer ä¹‹é–“çš„é€£ç·šè®Šå¾—ç›´è¦º\nå•Ÿå‹•èˆ‡é—œé–‰åªå‰©ä¸€å€‹æŒ‡ä»¤\n\né€™ä¹Ÿæ˜¯ç‚ºä»€éº¼åœ¨çœŸå¯¦å°ˆæ¡ˆä¸­ï¼ŒDocker Compose å¹¾ä¹æ˜¯æ¨™é…ï¼Œè€Œä¸æ˜¯é¸é…!!\n\n  è¬è¬é–±è®€åˆ°é€™è£¡çš„ä½ &#x2F;å¦³å¦‚æœè¦ºå¾—æ–‡ç« å°æ‚¨æœ‰å¹«åŠ©ä¸å¦¨æŒ‰å€‹å–œæ­¡è‹¥æœ‰ä»»ä½•ç–‘å•ä¹Ÿæ­¡è¿åº•ä¸‹ç•™è¨€\n\n\n","categories":["Docker"],"tags":["Docker","Backend","Docker Compose"]}]